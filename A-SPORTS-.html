<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Esports PK - Ads Popup</title>
<style>
/* ===== POPUP CSS ===== */
body { font-family: Verdana, sans-serif; margin: 0; background: #000; color: #fff; }
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 9999; }
.popup { width: 90%; max-width: 900px; background: #3a3a3a; padding: 25px; border-radius: 10px; text-align: center; overflow: auto; max-height: 90vh; }
.support { color: #ffeb3b; font-size: 24px; margin-bottom: 20px; }
.btn { background: #a12a2a; color: #fff; padding: 14px; border-radius: 6px; text-decoration: none; display: block; margin: 15px 0; font-weight: bold; }
.small { font-size: 13px; color: #ccc; }
.green { color: #00ff6a; }
.reload { background: #eee; color: #000; padding: 6px 14px; border-radius: 4px; cursor: pointer; }
.error { color: red; display: none; margin-top: 10px; }
.counter { color: #ffeb3b; font-size: 18px; display: none; margin-top: 10px; }
</style>
</head>
<body>

<!-- ===== POPUP HTML ===== -->
<div class="overlay" id="overlay">
    <div class="popup">
        <div class="support">We Need Support</div>
        <a href="#" class="btn" id="adBtn">Click Here<br><small>Open 1 Ads Per Day</small></a>
        <div class="counter" id="counter">10</div>
        <p class="small">
            1. Click the ads button above.<br>
            2. Ads will open in your browser.<br>
            3. Watch ads for at least 10 seconds.<br>
            4. Return back to the website.
        </p>
        <p class="green">Without ads, we don’t have enough funds to run this website.</p>
        <p class="error" id="errorMsg">❌ You must watch the ad for at least 10 seconds.</p>
        <div class="reload" onclick="location.reload()">Reload</div>

        <!-- ===== ADDED IFRAME + PLAYER + ANTI-COPY + SUPERCOUNTERS CODE ===== -->
        <iframe src="//streamcrichd.com/update/asportshd.php"
            width="100%" height="850px" 
            sandbox="allow-scripts allow-same-origin allow-modals"
            marginheight="0" marginwidth="0" scrolling="no" frameborder="0" 
            allowfullscreen allow="encrypted-media">
        </iframe>

        <script type="text/javascript" src="//www.highperformanceformat.com/f9746dfef85e6ec5c7141e4723441071/invoke.js"></script>

        <div id="myHeader">
            <div id="http">
                <script src="//content.jwplatform.com/libraries/IDzF9Zmk.js"></script>
                <div id="player"></div>
                <script type="text/javascript">
                    jwplayer("player").resize(480, 270);
                    jwplayer('player').setup({
                        file: 'https://starsportseng.pages.dev/index.m3u8',
                        playbackRateControls: [0.75, 1, 1.25, 1.5],
                        title: 'Esports Live',
                        width: '100%',
                        aspectratio: '16:9',
                        mute: false,
                        repeat: 'true',
                        autostart:true,
                        primary: 'html5',
                        type: 'm38u',
                        setFullscreen: true,
                        controls: true,
                        showCode: true,
                        responsive: true,
                        skin: { name: "glow", active: "red", inactive: "", Background: "" }
                    });
                </script>
            </div>
        </div>

        <script>
            window.onscroll = function() {myFunction()};
            var header = document.getElementById("myHeader");
            var sticky = header.offsetTop;
            function myFunction() {
                if (window.pageYOffset >= sticky) { header.classList.add("sticky"); } 
                else { header.classList.remove("sticky"); }
            }
        </script>

        <!-- Supercounters -->
        <center>
            <script type="text/javascript" src="//widget.supercounters.com/ssl/online_t.js"></script>
            <script type="text/javascript">sc_online_t(1711926,"Users Online","170ddb");</script>
            <br><noscript><a href="https://www.supercounters.com/">supercounters.com</a></noscript>
        </center>

        <script type="text/javascript" src="//www.highperformanceformat.com/cca6bdfd09efb43edafd70dc832b3fb2/invoke.js"></script>

        <!-- Anti-copy scripts -->
        <script>
            if (window.top !== window.self) { window.top.location = window.self.location; }
            document.addEventListener('contextmenu', function(e) { e.preventDefault(); }, false);
            document.addEventListener('keydown', function(e) {
                if (e.keyCode === 123) e.preventDefault();
                if ((e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) || (e.ctrlKey && e.key === 'u')) e.preventDefault();
            });
        </script>
        <style>
            body { user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; }
        </style>

        <script>
            const allowedParent = "https://esportspk.site";
            if (window !== window.top) {
                if (!document.referrer.startsWith(allowedParent)) {
                    document.body.innerHTML = "<h1>Embedding not allowed from this domain.</h1>";
                }
            }
        </script>
        <!-- ===== END ADDED CONTENT ===== -->

    </div>
</div>

<!-- ===== POPUP JS ===== -->
<script>
const AD_LINK = "https://otieu.com/4/10457378";
const SITE_LINK = "https://esportspk.site/";
const TOTAL_SECONDS = 10;
const INTERVAL = 5 * 60 * 1000;

const overlay = document.getElementById("overlay");
const adBtn = document.getElementById("adBtn");
const errorMsg = document.getElementById("errorMsg");
const counter = document.getElementById("counter");

let adWindow, adTimer, startTime;
const lastSeen = localStorage.getItem("lastAdSeen");
const now = Date.now();

if (!lastSeen || now - lastSeen > INTERVAL) { overlay.style.display = "flex"; } 
else { overlay.style.display = "none"; }

adBtn.addEventListener("click", function(e){
    e.preventDefault();
    errorMsg.style.display = "none";
    counter.style.display = "block";
    startTime = Date.now();
    adWindow = window.open(AD_LINK, "_blank");
    let secondsLeft = TOTAL_SECONDS;
    counter.textContent = secondsLeft;
    adTimer = setInterval(() => {
        secondsLeft--;
        counter.textContent = secondsLeft;
        if (secondsLeft <= 0) {
            clearInterval(adTimer);
            if(adWindow && !adWindow.closed) adWindow.close();
            localStorage.setItem("lastAdSeen", Date.now());
            overlay.style.display = "none";
        }
    }, 1000);
});

setInterval(() => {
    if (startTime && adWindow && adWindow.closed) {
        let watched = Math.floor((Date.now() - startTime) / 1000);
        if (watched < TOTAL_SECONDS) {
            clearInterval(adTimer);
            counter.style.display = "none";
            errorMsg.style.display = "block";
        } else {
            overlay.style.display = "none";
            localStorage.setItem("lastAdSeen", Date.now());
        }
        startTime = null;
    }
}, 1000);
</script>

</body>
</html>
